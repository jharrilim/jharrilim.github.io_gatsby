{"componentChunkName":"component---src-templates-blog-template-tsx","path":"/blog/creating-a-speech-app-with-rasa","result":{"data":{"markdownRemark":{"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3f524b837c87d2c28ac6ec32ff2d49a5/212bf/code-of-hammurabi.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.44171779141104%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHJplfFQoP/xAAYEAADAQEAAAAAAAAAAAAAAAAAAQIQEf/aAAgBAQABBQJEnWInP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABkQAAIDAQAAAAAAAAAAAAAAAAABEBEhMf/aAAgBAQABPyGJVDacCZ//2gAMAwEAAgADAAAAELcv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAQEBAAMAAAAAAAAAAAAAAQARMSFBkf/aAAgBAQABPxDwS0ZyAMDJviT7SZ2//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Code of Hammurabi\"\n        title=\"Code of Hammurabi\"\n        src=\"/static/3f524b837c87d2c28ac6ec32ff2d49a5/6aca1/code-of-hammurabi.jpg\"\n        srcset=\"/static/3f524b837c87d2c28ac6ec32ff2d49a5/d2f63/code-of-hammurabi.jpg 163w,\n/static/3f524b837c87d2c28ac6ec32ff2d49a5/c989d/code-of-hammurabi.jpg 325w,\n/static/3f524b837c87d2c28ac6ec32ff2d49a5/6aca1/code-of-hammurabi.jpg 650w,\n/static/3f524b837c87d2c28ac6ec32ff2d49a5/212bf/code-of-hammurabi.jpg 768w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Overview</h2>\n<p>The demand for creating speech enabled applications is growing constantly. Whether it be voice or text, there are many applications for which our dialogue may be used. Language is the most important technology to ever be created by humans, and it us up to us to take full advantage of it.</p>\n<p>In this post, we will look at how we can create an application that can derive meaning from text, and respond back in a natural way. I advise that you have at least a basic understanding of Python as well as how to use <code class=\"language-text\">conda</code> and <code class=\"language-text\">pip</code> before hopping into this tutorial.</p>\n<h2>Table of Contents</h2>\n<ul>\n<li><a href=\"#overview\">Overview</a></li>\n<li><a href=\"#table-of-contents\">Table of Contents</a></li>\n<li><a href=\"#installation\">Installation</a></li>\n<li><a href=\"#lets-jump-in\">Let's Jump In</a>\n<ul>\n<li><a href=\"#holy-smokes-there-are-a-lot-of-files-what-does-all-of-it-mean\">Holy smokes, there are a lot of files. What does all of it mean?</a></li>\n</ul>\n</li>\n<li><a href=\"#data\">Data</a>\n<ul>\n<li><a href=\"#nlu\">NLU</a></li>\n<li><a href=\"#stories\">Stories</a></li>\n<li><a href=\"#now-i-know-what-the-data-is-what-do-i-do-with-it\">Now I know what the data is, what do I do with it?</a></li>\n<li><a href=\"#what-is-this-domainyml-file\">What <em>is</em> this domain.yml file?</a></li>\n</ul>\n</li>\n</ul>\n<h2>Installation</h2>\n<p>In order to get started, you will need the following installed on your computer:</p>\n<ul>\n<li><a href=\"https://www.anaconda.com/distribution/\">Anaconda</a> (Python 3+)</li>\n<li><a href=\"https://www.tensorflow.org/install\">Tensorflow</a></li>\n<li><a href=\"https://rasa.com/docs/rasa/user-guide/installation/\">Rasa/Rasa-x</a></li>\n<li><a href=\"https://pypi.org/project/PyAudio/\">PyAudio</a> (and its dependent, <a href=\"http://www.portaudio.com/\">portaudio</a>)</li>\n<li><a href=\"https://pypi.org/project/SpeechRecognition/\">SpeechRecognition</a></li>\n</ul>\n<blockquote>\n<p>For Windows users, you will need to have Microsoft's C++ Build tools installed, which you can find <a href=\"https://visualstudio.microsoft.com/downloads/\"><strong>here</strong></a>.</p>\n</blockquote>\n<p>To install these, activate your <code class=\"language-text\">conda</code> environment and run the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\">pip <span class=\"token function\">install</span> --upgrade pip\npip <span class=\"token function\">install</span> tensorflow\npip <span class=\"token function\">install</span> rasa-x --extra-index-url https://pypi.rasa.com/simple\nconda <span class=\"token function\">install</span> -y -c conda-forge portaudio\nconda <span class=\"token function\">install</span> -y PyAudio\nconda <span class=\"token function\">install</span> -y -c conda-forge speechrecognition</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p><em>Note: You can use the docker container for Rasa. I have however tried to use PyAudio in docker as well, and I'm not too sure how to give the container access to the microphone on Windows. If you have any experience in this area and would like to contribute, check out <a href=\"https://github.com/jharrilim/RasaDocker\">my repository</a> containing the Dockerfile.</em></p>\n</blockquote>\n<h2>Let's Jump In</h2>\n<p>Now that we've gotten everything we needed to be installed, let's go ahead and create a new directory and initialize it with rasa:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"token function\">mkdir</span> speech-app <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">$_</span>\nrasa init --no-prompt <span class=\"token builtin class-name\">.</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3>Holy smokes, there are a lot of files. What does all of it mean?</h3>\n<p>There are indeed. Let's start with the most important part, the data!</p>\n<h2>Data</h2>\n<p>Our Rasa application (and frankly all analytic applications) will be heavily based on the data that we give it. The quality of your application is dependent on the quality of your data. Let's take a look at the <code class=\"language-text\">nlu.md</code> file that is found within the <code class=\"language-text\">data</code> folder.</p>\n<h3>NLU</h3>\n<p>We have a couple of intents, which look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-md line-numbers\"><code class=\"language-md\"><span class=\"token title important\"><span class=\"token punctuation\">##</span> intent:affirm</span>\n\n<span class=\"token list punctuation\">-</span> yes\n<span class=\"token list punctuation\">-</span> indeed\n<span class=\"token list punctuation\">-</span> of course\n<span class=\"token list punctuation\">-</span> that sounds good\n<span class=\"token list punctuation\">-</span> correct\n\n<span class=\"token title important\"><span class=\"token punctuation\">##</span> intent:deny</span>\n\n<span class=\"token list punctuation\">-</span> no\n<span class=\"token list punctuation\">-</span> never\n<span class=\"token list punctuation\">-</span> I don't think so\n<span class=\"token list punctuation\">-</span> don't like that\n<span class=\"token list punctuation\">-</span> no way\n<span class=\"token list punctuation\">-</span> not really\n\n<span class=\"token title important\"><span class=\"token punctuation\">##</span> intent:goodbye</span>\n\n<span class=\"token list punctuation\">-</span> bye\n<span class=\"token list punctuation\">-</span> goodbye\n<span class=\"token list punctuation\">-</span> see you around\n<span class=\"token list punctuation\">-</span> see you later</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This data depicts two things: Headings which include an intent followed by the name of the intent, and some examples of phrases that pertain to that intent. We can use this data to associate phrases that the end user gives us with one of these labelled intents. In technical terms, this is known as a <em>multi-class classification problem</em>, since there are multiple known targets for which we must select from.</p>\n<p>These intents have a very specific purpose. <strong>Intents are the building blocks for your stories.</strong> In a story, you compose intents together to, you've guessed it, form a story.</p>\n<h3>Stories</h3>\n<p>In the case of our application, stories are data structures which represent the flow of our application. If you remember those story books from when you were a child where it would give you options at the end of the page in a fashion such as:</p>\n<blockquote>\n<p><em>You say yes to the wizard. Go to page 63.</em></p>\n<p><em>You say no to the wizard. Go to page 74.</em></p>\n</blockquote>\n<p>In Rasa, a story is actually similar to these books where you select a path. They are kept in the <code class=\"language-text\">stories.md</code> in the data folder. Your stories should look something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-md line-numbers\"><code class=\"language-md\"><span class=\"token title important\"><span class=\"token punctuation\">##</span> happy path</span>\n\n<span class=\"token list punctuation\">-</span> greet\n  <span class=\"token list punctuation\">-</span> utter_greet\n<span class=\"token list punctuation\">-</span> mood_great\n  <span class=\"token list punctuation\">-</span> utter_happy\n\n<span class=\"token title important\"><span class=\"token punctuation\">##</span> sad path 1</span>\n\n<span class=\"token list punctuation\">-</span> greet\n  <span class=\"token list punctuation\">-</span> utter_greet\n<span class=\"token list punctuation\">-</span> mood_unhappy\n  <span class=\"token list punctuation\">-</span> utter_cheer_up\n  <span class=\"token list punctuation\">-</span> utter_did_that_help\n<span class=\"token list punctuation\">-</span> affirm\n  <span class=\"token list punctuation\">-</span> utter_happy</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Each story begins with a \"<code class=\"language-text\">## header</code>\". Within these headers, you will see a list of <code class=\"language-text\">* intents</code>. These intents can contain possible <code class=\"language-text\">- responses</code> to those intents. With the above data, you may begin either of the two stories with a <code class=\"language-text\">greet</code> intent. After your bot replies back with <code class=\"language-text\">utter_greet</code>, the user responds again. If the user responds with something that falls into the <code class=\"language-text\">mood_great</code> intent, the bot will follow the <em>happy path</em> and reply with <code class=\"language-text\">utter_happy</code>. If the user responds with something that falls into the <code class=\"language-text\">mood_unhappy</code> intent, then the bot will follow the <em>sad path 1</em> and reply with <strong>both</strong> <code class=\"language-text\">utter_cheer_up</code> and <code class=\"language-text\">utter_did_that_help</code>.</p>\n<h3>Now I know what the data is, what do I do with it?</h3>\n<p>Time to train yourself a model! Simply run the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\">rasa train</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>That's it!</p>\n<p>Well, not quite. I forgot to mention that there is also a <code class=\"language-text\">domain.yml</code> file that is used when running <code class=\"language-text\">rasa train</code> (this <code class=\"language-text\">domain.yml</code> file was one of the files generated from the <code class=\"language-text\">rasa init</code> at the start of this post).</p>\n<h3>What <em>is</em> this domain.yml file?</h3>\n<p>The <code class=\"language-text\">domain.yml</code> file contains all the information your bot needs to know to behave. Right now, it is comprised of <strong>actions</strong> (these are the responses that are used in the stories), the <strong>intents</strong> that you wish to use from your <code class=\"language-text\">nlu.md</code>, and some templates for each of your actions (this is where you get to specify what your responses actually do, whereas in the <code class=\"language-text\">stories.md</code>, you are simply stating the flow).</p>","frontmatter":{"date":"August 07, 2019","slug":"/blog/creating-a-speech-app-with-rasa","title":"Creating a Speech App With Rasa"}}},"pageContext":{"slug":"/blog/creating-a-speech-app-with-rasa"}},"staticQueryHashes":["1557651402","63159454"]}